apiVersion: v1
kind: Secret
metadata:
  name: secret-basic-auth
type: kubernetes.io/basic-auth
stringData:
  username: "admin" # required field for kubernetes.io/basic-auth
  password: "t0p-Secret" # required field for kubernetes.io/basic-auth
---
apiVersion: tekton.dev/v1
kind: TaskRun
metadata:
  name: secret-env-from
spec:
  taskSpec:
    steps:
    - name: secret-env-from
      image: mirror.gcr.io/ubuntu
      script: |
        #!/usr/bin/env bash
        echo $username
        echo $password
        BASIC_AUTH=$(echo $username:$password | base64)
        echo "Authorization: Basic $BASIC_AUTH"

      envFrom:
        - secretRef:
            name: secret-basic-auth
