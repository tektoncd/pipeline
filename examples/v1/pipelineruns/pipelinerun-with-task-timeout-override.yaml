---
# This example demonstrates how TaskRunSpecs can override timeout settings
# defined in the Pipeline spec, providing more granular timeout control
apiVersion: tekton.dev/v1
kind: Task
metadata:
  name: sleep-task
spec:
  steps:
  - name: sleep-long
    image: alpine:latest
    script: |
      #!/bin/sh
      sleep 10
---
apiVersion: tekton.dev/v1
kind: Task
metadata:
  name: verify-task
spec:
  steps:
  - name: verify-completion
    image: alpine:latest
    script: |
      #!/bin/sh
      echo "- Pipeline task timeout: 60s (defined in pipeline spec)"
      echo "- TaskRunSpecs override: 45s (defined in pipelinerun spec)"
      echo "- Actual task duration: 10s (within 45s override timeout)"
---
apiVersion: tekton.dev/v1
kind: Pipeline
metadata:
  name: taskrun-timeout-override
spec:
  tasks:
  - name: long-running-task
    taskRef:
      kind: Task
      name: sleep-task
    timeout: 1m0s  # 60 seconds - this is the baseline timeout
  - name: verify-timeout
    runAfter:
    - long-running-task
    taskRef:
      kind: Task
      name: verify-task
---
apiVersion: tekton.dev/v1
kind: PipelineRun
metadata:
  name: taskrun-timeout-override
spec:
  pipelineRef:
    name: taskrun-timeout-override
  taskRunSpecs:
  - pipelineTaskName: long-running-task
    serviceAccountName: default
    timeout: 45s  # Override: reduced from 60s to 45s to demonstrate override functionality